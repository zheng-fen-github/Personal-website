{"ast":null,"code":"import _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Head from 'next/head';\nimport List from './list';\nimport Nav from '../../component/index/book-nav';\nimport Book from './book';\n\nfunction Js({\n  data\n}) {\n  useEffect(() => {\n    //响应字体事件\n    setData(data);\n    ev();\n    window.addEventListener('resize', ev);\n    return () => {\n      window.removeEventListener('resize', ev);\n    };\n  }, []);\n  let windowRef = React.createRef(); // 窗口Dom ref 定义\n\n  let MessageRef = React.createRef();\n  const {\n    0: BookData,\n    1: setBookData\n  } = useState(null); // 数据定义\n\n  const {\n    0: Data,\n    1: setData\n  } = useState(null);\n  const {\n    0: Message,\n    1: setMessage\n  } = useState(null);\n\n  const openEv = id => {\n    // 打开窗口事件\n    let LookList = Data.filter(e => e._id === id);\n    setBookData(LookList[0]);\n    windowRef.current.classList.add('open-list');\n    document.body.style.overflow = \"hidden\";\n  };\n\n  const openBook = id => {\n    // 打开三级窗口事件\n    MessageRef.current.classList.add('open-book');\n    MessageRef.current.previousElementSibling.style.display = 'flex';\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, null, __jsx(\"title\", {\n    className: \"jsx-3180985772\"\n  }, \"Create Next App\"), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css\",\n    integrity: \"sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh\",\n    crossorigin: \"anonymous\",\n    className: \"jsx-3180985772\"\n  })), __jsx(Nav, null), __jsx(Book, {\n    message: Message,\n    ref: MessageRef\n  }), __jsx(\"div\", {\n    className: \"jsx-3180985772\" + \" \" + \"row justify-content-center  ctn\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3180985772\" + \" \" + \"col-10 pt-5\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3180985772\" + \" \" + \"row root\"\n  }, Data && Data.map(e => __jsx(\"div\", {\n    key: e._id,\n    className: \"jsx-3180985772\" + \" \" + \"col-6 col-lg-4 p-4 pr-4\"\n  }, __jsx(\"div\", {\n    onClick: () => openEv(e._id),\n    className: \"jsx-3180985772\" + \" \" + \"row test align-items-center\"\n  }, __jsx(\"div\", {\n    className: \"jsx-3180985772\" + \" \" + \"col-4\"\n  }, __jsx(\"img\", {\n    src: \"../kuai.png\",\n    alt: \"\",\n    className: \"jsx-3180985772\" + \" \" + 'my-4'\n  })), __jsx(\"div\", {\n    className: \"jsx-3180985772\" + \" \" + \"col-8\"\n  }, __jsx(\"p\", {\n    className: \"jsx-3180985772\" + \" \" + 'text-center h2'\n  }, e.BookTitle)))))))), __jsx(List, {\n    ref: windowRef,\n    sendMessage: setMessage,\n    BookData: BookData,\n    open: openBook\n  }), __jsx(_JSXStyle, {\n    id: \"3180985772\"\n  }, [\".ctn.jsx-3180985772{min-height:85vh;background:#f6f9fd;}\", \"p.jsx-3180985772{-webkit-transition:.4s;transition:.4s;}\", \".test.jsx-3180985772{border-radius:16px;box-shadow:0 0 20px #bdbdbd;cursor:pointer;}\", \".root.jsx-3180985772>div.jsx-3180985772:nth-child(odd)>.test.jsx-3180985772{background:linear-gradient(125deg,#8d6bff,#3766ff);color:white;}\", \".root.jsx-3180985772>div.jsx-3180985772:nth-child(even)>.test.jsx-3180985772{background:white;color:black;}\", \".ctn.jsx-3180985772 .test.jsx-3180985772:hover p.jsx-3180985772{-webkit-transform:scale(1.3);-ms-transform:scale(1.3);transform:scale(1.3);}\", \".ctn.jsx-3180985772 .test.jsx-3180985772 img.jsx-3180985772{width:100%;}\"]));\n}\n\nexport default Js;\n\nconst ev = () => {\n  if (document.documentElement.clientWidth < 980) {\n    // 响应字体              \n    let list = document.querySelectorAll('.test .h2');\n\n    if (list) {\n      Array.from(list).map(e => {\n        e.classList.add('h4');\n      });\n    }\n  } else {\n    let list = document.querySelectorAll('.test .h4');\n\n    if (list) {\n      Array.from(list).map(e => {\n        e.classList.remove('h4');\n      });\n    }\n  }\n}; // useEffect(() => {\n//    (async () => {\n//      let req =  await fetch('http://localhost:4040/find/book/0');\n//      let result = await  req.json();\n//      console.log(result);\n//      setData(result);\n//    })()        \n// },[])","map":null,"metadata":{},"sourceType":"module"}